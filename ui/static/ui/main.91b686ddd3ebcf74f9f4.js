"use strict";(self.webpackChunkui=self.webpackChunkui||[]).push([[179],{7539:(e,t,a)=>{var n=a(7294),s=a(745),l=a(9669),r=a.n(l),c=a(5692),i=a(3314),o=a(6968),m=a(786),d=a(682),u=a(4051),p=a(1555),E=a(3489),g=a(5961);const h=`${location.origin}/api`,f=e=>{const{project:t,setProject:a,setAppLoading:s,taskInProgress:l}=e,[c,o]=(0,n.useState)(sessionData.username),[m,d]=(0,n.useState)(sessionData.password),[u,p]=n.useState(!0),[E,g]=n.useState([]);return(0,n.useEffect)((()=>{let e=!1;return async function(){let t=`${h}/get_projects`;p(!0),s(!0);const a=await r().get(t,{auth:{username:c,password:m}}),n=await a.data;e||(g(n.map((e=>({label:e.name,value:e.id})))),p(!1),s(!1))}().catch((e=>{console.log(e),s(!1)})),()=>{e=!0}}),[]),n.createElement(i.Z.Select,{"aria-label":"Select project",autoFocus:!0,id:"formProjectSelect",disabled:u||l,onChange:e=>{a({id:e.currentTarget.value,name:e.currentTarget.options[e.currentTarget.selectedIndex].text})}},n.createElement("option",{key:"Select project",value:"Select project"},"Select project"),E.map((({label:e,value:t})=>n.createElement("option",{key:t,value:t},e))))},S=`${location.origin}/api`,b=e=>{const{project:t,setSuite:a,setAppLoading:s,taskInProgress:l}=e,[c,o]=(0,n.useState)(sessionData.username),[m,d]=(0,n.useState)(sessionData.password),[u,p]=n.useState(!0),[E,g]=n.useState([]);return(0,n.useEffect)((()=>{let e=!1;return"Select project"!==t.name?async function(){let n=`${S}/get_suites/${t.id}`;a({id:"Select suite",name:"Select suite"}),p(!0),s(!0);const l=await r().get(n,{auth:{username:c,password:m}}),i=await l.data;e||(g(i.map((e=>({label:e.name,value:e.id})))),p(!1),s(!1))}().catch((e=>{console.log(e),s(!1)})):(g([]),a({id:"Select suite",name:"Select suite"})),()=>{e=!0}}),[t]),n.createElement(i.Z.Select,{"aria-label":"Select suite",id:"formSuiteSelect",disabled:u||"Select project"===t.name||l,onChange:e=>a({id:e.currentTarget.value,name:e.currentTarget.options[e.currentTarget.selectedIndex].text})},n.createElement("option",{key:"Select suite",value:"Select suite"},"Select suite"),E.map((({label:e,value:t})=>n.createElement("option",{key:t,value:t},e))))},N=`${location.origin}/api`,v=e=>{const{project:t,suite:a,setSection:s,setAppLoading:l,taskInProgress:c}=e,[o,m]=(0,n.useState)(sessionData.username),[d,u]=(0,n.useState)(sessionData.password),[p,E]=n.useState(!0),[g,h]=n.useState([]);return(0,n.useEffect)((()=>{s({id:"Select top section",name:"Select top section"}),E(!0)}),[t]),(0,n.useEffect)((()=>{let e=!1;return"Select project"!==t.name&&"Select suite"!==a.name?async function(){let n=`${N}/get_sections/${t.id}&suite_id=${a.id}`;E(!0),l(!0);const s=await r().get(n,{auth:{username:o,password:d}}),c=await s.data;e||(h(c.map((e=>({label:e.name,value:e.id})))),E(!1),l(!1))}().catch((e=>{console.log(e),l(!1)})):(h([]),s({id:"Select top section",name:"Select top section"})),()=>{e=!0}}),[a]),n.createElement(i.Z.Select,{"aria-label":"Select top section",id:"formSectionSelect",disabled:p||"Select suite"===a.name||c,onChange:e=>s({id:e.currentTarget.value,name:e.currentTarget.options[e.currentTarget.selectedIndex].text})},n.createElement("option",{key:"Select top section",value:"Select top section"},"Select top section"),g.map((({label:e,value:t})=>n.createElement("option",{key:t,value:t},e))))},Z=e=>{const{section:t,setIdFileName:a,taskInProgress:s}=e;return n.createElement(n.Fragment,null,n.createElement(i.Z.Label,null,"File containing QC test case ids.xlsx"),n.createElement(i.Z.Control,{type:"file",accept:".xlsx",disabled:"Select top section"===t.name||s,onChange:e=>a(e.target.files[0]?e.target.files[0]:"")}))},y=e=>{const{section:t,idFileName:a,setDetailFileName:s,taskInProgress:l}=e;return n.createElement(n.Fragment,null,n.createElement(i.Z.Label,null,"File containing QC test case with steps.xlsx"),n.createElement(i.Z.Control,{type:"file",accept:".xlsx",disabled:"Select top section"===t.name||void 0===a||""===a||l,onChange:e=>s(e.target.files[0]?e.target.files[0]:"")}))},w=e=>{const{section:t,idFileName:a,detailFileName:s,setAttachmentFileName:l,taskInProgress:r}=e;return n.createElement(n.Fragment,null,n.createElement(i.Z.Label,null,"File attachments.zip"),n.createElement(i.Z.Control,{type:"file",accept:".zip",disabled:"Select top section"===t.name||void 0===a||""===a||void 0===s||""===s||r,onChange:e=>l(e.target.files[0]?e.target.files[0]:"")}))},F=e=>{const{section:t,idFileName:a,detailFileName:s,attachmentFileName:l,setRetrySwitch:r,taskInProgress:c}=e;return n.createElement(n.Fragment,null,n.createElement(i.Z.Label,null,"Re-upload test cases?"),n.createElement(i.Z.Check,{disabled:"Select top section"===t.name||void 0===a||""===a||void 0===s||""===s||void 0===l||""===l||c,type:"switch",label:"This will reprocess the test cases even if they have Testrail id populated in the test steps .xlsx file.",id:"formRetrywitchInput",defaultChecked:!0,onChange:e=>r(e.target.checked)}))};var x=a(1945);const k=e=>{const{section:t,idFileName:a,detailFileName:s,attachmentFileName:l,taskInProgress:r}=e;return n.createElement("div",{className:"d-grid"},n.createElement(x.Z,{if:"formUploadButton",variant:"dark",disabled:"Select top section"===t.name||void 0===a||""===a||void 0===s||""===s||void 0===l||""===l||r,size:"lg",type:"submit"},"Upload test cases to Testrail"))};var _=a(1479);const I=e=>{const{currentTask:t}=e;let a=0;0!==t.total_cases&&(a=(t.imported_cases/t.total_cases*100).toFixed(2));let s=n.createElement(n.Fragment,null),l=n.createElement(n.Fragment,null),r=n.createElement(n.Fragment,null),i=n.createElement(n.Fragment,null),m=n.createElement(n.Fragment,null);return"Complete"===t.status||"Failed"===t.status||"Cancelled"===t.status?(s=n.createElement(_.Z,{striped:!0,now:a,label:`${a}%`,visuallyHidden:!0}),"Complete"===t.status&&(m=n.createElement(n.Fragment,null,"d in ",(e=>{let t=[],a=(e=e.split(".")[0]).split(":")[0],n=e.split(":")[1],s=e.split(":")[2];return a="00"===a?"":a.startsWith("0")?a[1]+"h":a+"h",n="00"===n?"":n.startsWith("0")?n[1]+"m":n+"m",s="00"===s?"":s.startsWith("0")?s[1]+"s":s+"s",t.push(a),t.push(n),t.push(s),t.join(" ").trim()})(t.elapsed_time),"."),l=n.createElement("i",{className:"ps-1 fa fa-check","aria-hidden":"true"})),t.imported_cases>0&&(r=n.createElement(u.Z,{className:"mt-2"},n.createElement(p.Z,null,"Download processed file with Testrail information: ",n.createElement("a",{href:`${location.origin}${t.steps_file_name}`,className:"link-secondary"},t.steps_file_name.split("/").at(-1))," "))),"Failed"===t.status&&(l=n.createElement("i",{className:"ps-1 fa fa-exclamation-circle","aria-hidden":"true"}),i=n.createElement(u.Z,{className:"mt-2"},n.createElement(p.Z,{className:"text-danger"},"Error: ",t.status_message)))):"In Progress"===t.status?(s=n.createElement(_.Z,{animated:!0,now:a,label:`${a}%`,visuallyHidden:!0}),l=n.createElement(o.Z,{className:"ms-2",animation:"border",role:"status",size:"sm"})):s=n.createElement(_.Z,{striped:!0,now:a,label:`${a}%`,visuallyHidden:!0}),n.createElement("div",null,""!==t.session_id?n.createElement(c.Z,{className:"mb-2 pb-2"},n.createElement(c.Z.Body,null,n.createElement(u.Z,{className:"mb-2 align-middle"},n.createElement(p.Z,null,"Task Id: ",t.session_id),n.createElement(p.Z,{xs:6,className:"text-center"},"Status: ",t.status,m,l),n.createElement(p.Z,{style:{textAlign:"right"}},"Processed: ",t.imported_cases," of ",t.total_cases)),s,r,i)):n.createElement(n.Fragment,null))};function j(){return j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},j.apply(this,arguments)}r().defaults.xsrfCookieName="csrftoken",r().defaults.xsrfHeaderName="X-CSRFToken";const P=`${location.origin}/api`,$=new EventSource(`${P}/events/${sessionData.username}/`),T=e=>n.createElement(E.Z,j({id:"project-tooltip"},e),n.createElement("div",{className:"mb-1"},"Test cases and sub-sections will be created under the section you select."),n.createElement("div",null,"If you can't find the required section, open Testrail and create it.")),C=e=>n.createElement(E.Z,j({id:"file-tooltip"},e),n.createElement("div",{className:"mb-2"},"Files must be in ",n.createElement("span",{className:"text-warning"},".xlsx")," format. ",n.createElement("br",null),"If you have files with .xls extension, don't just rename it to .xlsx. ",n.createElement("br",null),"Open the file in Microsoft Excel and save it in .xlsx format."),n.createElement("div",{className:"mb-2"},"The data must be in the ",n.createElement("span",{className:"text-warning"},"first")," worksheet in both excel files."),n.createElement("div",null,"Gather all the attachment folders under a folder named ",n.createElement("span",{className:"text-warning"},"attachments"),". ",n.createElement("br",null),"Then, convert the folder into ",n.createElement("span",{className:"text-warning"},"attachments.zip")," archive and upload.")),D=e=>{const[t,a]=(0,n.useState)(sessionData.username),[s,l]=(0,n.useState)(sessionData.password),[E,h]=(0,n.useState)({id:"Select project",name:"Select project"}),[S,N]=(0,n.useState)({id:"Select suite",name:"Select suite"}),[x,_]=(0,n.useState)({id:"Select top section",name:"Select top section"}),[j,D]=(0,n.useState)(),[A,L]=(0,n.useState)(),[B,G]=(0,n.useState)(),[R,z]=(0,n.useState)(!0),[H,O]=(0,n.useState)(!1),[M,q]=(0,n.useState)(sessionData.latest_task),[Y,U]=(0,n.useState)(!1);return $.onmessage=function(e){try{q(JSON.parse(e.data))}catch(e){}},$.onerror=function(e){console.log("Server closed event connection!")},(0,n.useEffect)((()=>{void 0!==M&&("In Progress"===M.status?U(!0):U(!1))})),n.createElement("div",null,t?n.createElement("div",null,n.createElement(I,{currentTask:M}),n.createElement(i.Z,{onSubmit:e=>{e.preventDefault(),e.stopPropagation();let a=new FormData;a.append("user",t),a.append("project_id",E.id),a.append("project_name",E.name),a.append("suite_id",S.id),a.append("suite_name",S.name),a.append("section_id",x.id),a.append("section_name",x.name),a.append("retry_import",R?"True":"False"),a.append("status","New"),a.append("id_file_name",j),a.append("steps_file_name",A),a.append("attachment_file_name",B),async function(e){O(!0);let a=`${P}/process_task/`;const n=btoa(`${t}:${s}`),l=await r()({method:"post",url:a,data:e,headers:{Authorization:`Basic ${n}`,"content-type":"multipart/form-data"}}),c=await l.data;O(!1),q(c)}(a).catch((e=>{console.log(e),O(!1)}))}},n.createElement(c.Z,null,n.createElement(c.Z.Body,null,n.createElement("legend",{className:"border-bottom mb-4 legend"},"Please select Testrail project, test suite and top section. ",n.createElement(g.Z,{placement:"bottom",delay:{show:250,hide:400},overlay:T},n.createElement("i",{className:"fa fa-question-circle","aria-hidden":"true"}))),n.createElement(i.Z.Group,{className:"mb-4",controlId:"formProject"},n.createElement(f,{project:E,setProject:h,setAppLoading:O,taskInProgress:Y})),n.createElement(i.Z.Group,{className:"mb-4",controlId:"formSuite"},n.createElement(b,{project:E,setSuite:N,setAppLoading:O,taskInProgress:Y})),n.createElement(i.Z.Group,{className:"mb-4",controlId:"formSection"},n.createElement(v,{project:E,suite:S,setSection:_,setAppLoading:O,taskInProgress:Y})),n.createElement("legend",{className:"border-bottom mb-4 legend"},"Please upload the spreadsheets and attachments exported from HP ALM. ",n.createElement(g.Z,{placement:"bottom",delay:{show:250,hide:400},overlay:C},n.createElement("i",{className:"fa fa-question-circle","aria-hidden":"true"}))),n.createElement(i.Z.Group,{className:"mb-3",controlId:"formIdFile"},n.createElement(Z,{section:x,setIdFileName:D,taskInProgress:Y})),n.createElement(i.Z.Group,{className:"mb-3",controlId:"formDetailFile"},n.createElement(y,{section:x,idFileName:j,setDetailFileName:L,taskInProgress:Y})),n.createElement(i.Z.Group,{className:"mb-3",controlId:"formAttachmentFile"},n.createElement(w,{section:x,idFileName:j,detailFileName:A,setAttachmentFileName:G,taskInProgress:Y})),n.createElement(i.Z.Group,{className:"mb-3",controlId:"formRetrySwitch"},n.createElement(F,{section:x,idFileName:j,detailFileName:A,attachmentFileName:B,setRetrySwitch:z,taskInProgress:Y})),n.createElement(i.Z.Group,{className:"mb-3",controlId:"formUpload"},n.createElement(k,{section:x,idFileName:j,detailFileName:A,attachmentFileName:B,taskInProgress:Y}))))),n.createElement(m.Z,{show:H,backdrop:"static",keyboard:!1,animation:!1,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0},n.createElement(m.Z.Body,null,n.createElement(d.Z,{fluid:!0},n.createElement(u.Z,null,n.createElement(p.Z,{className:"text-center align-middle"},n.createElement(o.Z,{animation:"border",role:"status"},n.createElement("span",{className:"visually-hidden"},"Loading...")))))))):n.createElement(n.Fragment,null))};var A=a(7908),L=a(7315),B=a(7484),G=a(4110);B.extend(G);const R=e=>{const[t,a]=(0,n.useState)(!0);return n.createElement(n.Fragment,null,n.createElement(L.Z,{show:t,onClose:()=>a(!t),className:"w-100 mb-3"},n.createElement(L.Z.Header,{closeButton:!1},n.createElement("i",{className:"fa fa-comments me-2","aria-hidden":"true"}),n.createElement("strong",{className:"me-auto"},"Announcement"),n.createElement("small",null,B("20220411","YYYYMMDD").fromNow())),n.createElement(L.Z.Body,null,"Importing is now allowed only for ",n.createElement("strong",null,"Siebel CRM")," project with custom fields. Test Cases will be created as Regression type.")),n.createElement(A.Z,null,n.createElement(A.Z.Item,{eventKey:"0"},n.createElement(A.Z.Header,null,n.createElement("legend",{className:"text-center ps-4"},"Technology stack")),n.createElement(A.Z.Body,null,n.createElement(u.Z,{className:"mt-4 mb-3"},n.createElement(p.Z,{className:"text-center"},n.createElement("img",{height:"60",src:`${static_root}images/django_icon.png`})),n.createElement(p.Z,{className:"text-center"},n.createElement("img",{height:"60",src:`${static_root}images/django_rest_framework_icon.png`})),n.createElement(p.Z,{className:"text-center"},n.createElement("img",{height:"60",src:`${static_root}images/react_icon.png`}))),n.createElement(u.Z,{className:"mt-4 mb-3"},n.createElement(p.Z,{className:"text-center"},n.createElement("img",{height:"60",src:`${static_root}images/bootstrap_icon.png`})),n.createElement(p.Z,{className:"text-center"},n.createElement("img",{height:"60",src:`${static_root}images/docker_icon.png`})),n.createElement(p.Z,{className:"text-center"},n.createElement("img",{height:"60",src:`${static_root}images/mysql_icon.png`})))))))},z=document.getElementById("app");(0,s.s)(z).render(n.createElement(D,null));const H=document.getElementById("divTechnologyStack");(0,s.s)(H).render(n.createElement(R,null))}},e=>{e.O(0,[216],(()=>(7539,e(e.s=7539)))),e.O()}]);